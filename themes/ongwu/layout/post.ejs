<article class="post">
    <div class="container">
        <header class="post-header">
            <h1 class="post-title"><%- page.title %></h1>
            <div class="post-meta">
                <span class="post-date">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#666"/>
                    </svg>
                    <%- date(page.date, 'YYYY年MM月DD日') %>
                </span>
                <% if (page.categories && page.categories.length && page.categories[0]) { %>
                <span class="post-category">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" fill="#666"/>
                    </svg>
                    <%- page.categories[0].name %>
                </span>
                <% } %>
                <% if (page.tags && page.tags.length) { %>
                <span class="post-tags">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z" fill="#666"/>
                    </svg>
                    <% page.tags.forEach(function(tag, index) { %>
                        <a href="<%- config.root %>tags/<%- tag.name %>/" class="tag-link"><%- tag.name %></a>
                        <% if (index < page.tags.length - 1) { %>, <% } %>
                    <% }); %>
                </span>
                <% } %>
            </div>
        </header>
        
        <div class="post-content">
            <%- page.content %>
        </div>
        
        <footer class="post-footer">
            <div class="post-navigation">
                <% if (page.prev) { %>
                <a href="<%- config.root %><%- page.prev.path %>" class="prev-post">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" fill="#666"/>
                    </svg>
                    <%- page.prev.title %>
                </a>
                <% } %>
                <% if (page.next) { %>
                <a href="<%- config.root %><%- page.next.path %>" class="next-post">
                    <%- page.next.title %>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" fill="#666"/>
                    </svg>
                </a>
                <% } %>
            </div>
        </footer>
        
        <!-- 评论系统 -->
        <% if (theme.comments) { %>
        <section class="comments-section">
            <div class="container">
                <div class="comments-header">
                    <h3 class="comments-title">文章评论 (<span id="totalComments">0</span>)</h3>
                    <div class="comments-filter">
                        <select id="sortOrder" class="sort-select">
                            <option value="newest">最新优先</option>
                            <option value="oldest">最早优先</option>
                        </select>
                    </div>
                </div>
                
                <!-- 评论表单 -->
                <div class="comment-form-container">
                    <form id="commentForm" class="comment-form">
                        <div class="form-row">
                            <div class="form-group username-group">
                                <label for="username">用户名 *</label>
                                <input type="text" id="username" name="username" placeholder="请输入你的用户名" required>
                            </div>
                            <div class="form-group captcha-group">
                                <label for="captchaInput">验证码 *</label>
                                <div class="captcha-input-row">
                                    <input type="text" id="captchaInput" name="captcha" placeholder="请输入验证码" required>
                                    <span id="captchaText" class="captcha-text"></span>
                                    <button type="button" id="refreshCaptcha" class="refresh-captcha">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="currentColor"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="form-row comment-row">
                            <div class="form-group comment-group">
                                <label for="comment">留言内容 *</label>
                                <textarea id="comment" name="comment" placeholder="在这里写下你的留言..." required></textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="submit-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="currentColor"/>
                                </svg>
                                发表留言
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- 评论列表 -->
                <div class="comments-list" id="commentsList"></div>
                
                <!-- 分页 -->
                <div class="comments-pagination" id="commentsPagination"></div>
            </div>
        </section>
        <% } %>
    </div>
</article>
