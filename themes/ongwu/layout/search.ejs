<% if (theme.local_search && theme.local_search.enable) { %>
  <script type="text/javascript">
    // 搜索功能已在 main.js 中实现
    // 这里只需要确保 search.xml 被正确加载
    document.addEventListener('DOMContentLoaded', function() {
      console.log('初始化搜索功能...');
      // 搜索路径
      var search_path = "<%= config.search.path %>";
      if (search_path.length === 0) {
        search_path = "search.xml";
      }
      var path = "<%= config.root %>" + search_path;
      
      // 预加载搜索数据
      fetch(path)
        .then(response => {
          if (!response.ok) {
            throw new Error('搜索数据加载失败');
          }
          console.log('搜索数据加载成功');
        })
        .catch(error => {
          console.error('搜索数据加载错误:', error);
        });
    });
  </script>
<% } %>